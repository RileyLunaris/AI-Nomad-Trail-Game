<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 2025 AI Nomad Trail</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f9; }
        .progress-bar { transition: width 0.5s ease-in-out; }
        .stat-bar { height: 1.5rem; border-radius: 0.5rem; overflow: hidden; }
        .stat-fill { transition: width 0.5s; }
        #game-area { min-height: 80vh; }
        
        /* FINAL FIX: Dedicated style for disabled travel button */
        .button-disabled-style {
            background-color: #9ca3af !important; /* Tailwind gray-400 */
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none !important;
        }
    </style>
</head>
<body>
    <div id="game-area" class="p-4 md:p-8">
    </div>

    <script>
// --- Game Configuration & Constants ---
const START_CITY = "New York City, NY";
const END_CITY = "San Francisco, CA";
const TOTAL_DISTANCE = 3000;
const PROFESSIONS = [
    { name: "AI Prompt Engineer", cash: 3500, laptop: 100, mental: 90, description: "High income, high burnout risk." },
    { name: "Content Creator", cash: 2500, laptop: 95, mental: 100, description: "Flexible schedule, unpredictable income." },
    { name: "DevOps Consultant", cash: 3000, laptop: 100, mental: 100, description: "Stable income, heavy reliance on equipment." }
];

// --- Player Class (JavaScript equivalent) ---
class Player {
    constructor(professionName) {
        const professionData = PROFESSIONS.find(p => p.name === professionName) || PROFESSIONS[0];
        
        this.profession = professionName;
        this.distance = 0;
        this.cash = professionData.cash;
        this.laptop_health = professionData.laptop;
        this.mental_health = professionData.mental;
        this.is_alive = true;
        this.game_over_reason = "";
    }

    clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
    }

    applyEffect(cash, laptop, mental, outcomeText) {
        this.cash += cash;
        this.laptop_health = this.clamp(this.laptop_health + laptop, 0, 100);
        this.mental_health = this.clamp(this.mental_health + mental, 0, 100);
        
        const cashDisplay = cash > 0 ? `+${cash}` : `${cash}`;
        const laptopDisplay = laptop > 0 ? `+${laptop}` : `${laptop}`;
        const mentalDisplay = mental > 0 ? `+${mental}` : `${mental}`;

        this.logMessage(`Outcome: ${outcomeText} (Cash: $${cashDisplay}, Laptop: ${laptopDisplay}%, Mental: ${mentalDisplay}%)`, 'text-blue-600');
        this.checkGameOver();
    }
    
    checkGameOver() {
        if (this.cash <= 0) {
            this.game_over_reason = "You ran out of cash and couldn't pay for vital services or travel.";
            this.is_alive = false;
        }
        if (this.laptop_health <= 0) {
            this.game_over_reason = "Your main source of income (laptop) failed completely.";
            this.is_alive = false;
        }
        if (this.mental_health <= 0) {
            this.game_over_reason = "You experienced total digital burnout and quit the journey.";
            this.is_alive = false;
        }
        return !this.is_alive;
    }

    logMessage(text, colorClass = 'text-gray-800') {
        const log = document.getElementById('log-area');
        const p = document.createElement('p');
        p.className = `text-sm mb-1 ${colorClass}`;
        p.textContent = text;
        if (log) log.prepend(p);
    }
}

let player;
let isProcessing = false;
let currentScenario = null; 

// --- Core Game Functions ---

function rollForTravel() {
    // Lock prevents repeated travel clicks.
    if (isProcessing || !player.is_alive) return;
    isProcessing = true;
    
    // Clear scenario buttons and show "Traveling..." instantly
    const scenarioDisplay = document.getElementById('scenario-display');
    const scenarioControls = document.getElementById('scenario-controls');
    
    if (scenarioDisplay) scenarioDisplay.innerHTML = '<p class="text-lg text-indigo-700 font-semibold">Traveling...</p><p class="text-sm text-gray-500">Calculating next stop.</p>';
    if (scenarioControls) scenarioControls.innerHTML = ''; 
    
    // Simulate travel
    const distanceTraveled = Math.floor(Math.random() * 300) + 100;
    const cost = Math.floor(Math.random() * 150) + 50;
    const mentalDrain = Math.floor(Math.random() * 5) + 2;
    const laptopWear = Math.floor(Math.random() * 3) + 1;

    player.distance += distanceTraveled;
    
    player.applyEffect(
        -cost, 
        -laptopWear, 
        -mentalDrain, 
        `Traveled ${distanceTraveled} miles, costing $${cost}.`
    );
    updateUI();
    
    // Determine next state and display the next scenario instantly
    if (player.is_alive && player.distance < TOTAL_DISTANCE) {
        displayNextScenario();
    } else {
        updateUI(); 
    }
    
    isProcessing = false; // Release lock immediately after the next scenario is rendered
}

function displayNextScenario() {
    const scenarios = [
        { 
            text: "Your current co-working space has slow Wi-Fi. What do you do?",
            options: [
                { text: "Pay for premium private office (Costly, high productivity)", cash: -200, laptop: 0, mental: +10,
